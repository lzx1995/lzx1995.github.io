<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta property="og:type" content="website">
<meta property="og:title" content="Hello">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Hello">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hello">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.2',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>Hello</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Hello</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/10/TableView/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lzx1995">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/header.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/10/TableView/" itemprop="url">UITableView的一些小细节</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-10T22:27:21+08:00">
                2018-03-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1><span id="uitableview的一些小细节">UITableView的一些小细节</span></h1><ul>
<li>tableView的group样式的section高度由以下两个方法返回的高度决定：<ul>
<li><code>- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section</code></li>
<li><code>- (CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section</code></li>
</ul>
</li>
</ul>
<p>而<strong>tableView是不会主动调用这两个方法</strong>的，唯有实现了<br><code>- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section</code><br>才会调用第一个方法。实现<br><code>- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section</code><br>才会调用第二个方法.<br>当需要设置间距为0时，一般设置第一和第二方法的返回值为<code>CGFLOAT_MIN</code>(设置为0可能不起作用)</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">- (<span class="built_in">CGFloat</span>)tableView:(<span class="built_in">UITableView</span> *)tableView heightForFooterInSection:(<span class="built_in">NSInteger</span>)section</div><div class="line">&#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">CGFLOAT_MIN</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="built_in">UIView</span> *)tableView:(<span class="built_in">UITableView</span> *)tableView viewForFooterInSection:(<span class="built_in">NSInteger</span>)section</div><div class="line">&#123;</div><div class="line">    <span class="keyword">return</span> [[<span class="built_in">UIView</span> alloc] initWithFrame:<span class="built_in">CGRectZero</span>];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="built_in">CGFloat</span>)tableView:(<span class="built_in">UITableView</span> *)tableView heightForHeaderInSection:(<span class="built_in">NSInteger</span>)section</div><div class="line">&#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">CGFLOAT_MIN</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="built_in">UIView</span> *)tableView:(<span class="built_in">UITableView</span> *)tableView viewForHeaderInSection:(<span class="built_in">NSInteger</span>)section</div><div class="line">&#123;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> [[<span class="built_in">UIView</span> alloc] initWithFrame:<span class="built_in">CGRectZero</span>];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/05/KVO/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lzx1995">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/header.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/05/KVO/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-05T22:28:02+08:00">
                2018-03-05
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>The key-value observing <code>addObserver:forKeyPath:options:context:</code> method does not maintain strong references to the observing object, the observed objects, or the context. You should ensure that you maintain strong references to the observing, and observed, objects, and the context as necessary.</p>
</blockquote>
<hr>
<blockquote>
<p>In any case, the observer should always call the superclass’s implementation of observeValueForKeyPath:ofObject:change:context: when it does not recognize the context (or in the simple case, any of the key paths), because this means a superclass has registered for notifications as well.</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/12/02/CSAPP-Lab2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lzx1995">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/header.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/02/CSAPP-Lab2/" itemprop="url">CSAPP Lab2</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-02T14:35:14+08:00">
                2017-12-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <!-- toc -->
<ul>
<li><a href="#phase_1">phase_1:</a></li>
<li><a href="#phase_2">phase_2:</a></li>
<li><a href="#phase_4">phase_4:</a></li>
<li><a href="#phase_5">phase_5:</a></li>
<li><a href="#phase_6">phase_6:</a></li>
</ul>
<!-- tocstop -->
<h3><span id="phase_1">phase_1:</span></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">0000000000400ee0 &lt;phase_1&gt;:</div><div class="line">  400ee0:	48 83 ec 08          	sub    $0x8,%rsp</div><div class="line">  400ee4:	be 00 24 40 00       	mov    $0x402400,%esi</div><div class="line">  400ee9:	e8 4a 04 00 00       	callq  401338 &lt;strings_not_equal&gt;</div><div class="line">  400eee:	85 c0                	test   %eax,%eax</div><div class="line">  400ef0:	74 05                	je     400ef7 &lt;phase_1+0x17&gt;</div><div class="line">  400ef2:	e8 43 05 00 00       	callq  40143a &lt;explode_bomb&gt;</div><div class="line">  400ef7:	48 83 c4 08          	add    $0x8,%rsp</div><div class="line">  400efb:	c3                   	retq</div></pre></td></tr></table></figure>
<p>从前两个指令知道，string_not_equal的函数原型为 <strong>int string_not_equal(char * char *)</strong></p>
<p><code>test %eax, eax</code> 判断函数string_not_equal的返回值. 所以得查看string_not_equal函数的实现</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">0000000000401338 &lt;strings_not_equal&gt;:</div><div class="line">  401338:	41 54                	push   %r12</div><div class="line">  40133a:	55                   	push   %rbp</div><div class="line">  40133b:	53                   	push   %rbx</div><div class="line">  40133c:	48 89 fb             	mov    %rdi,%rbx</div><div class="line">  40133f:	48 89 f5             	mov    %rsi,%rbp</div><div class="line">  401342:	e8 d4 ff ff ff       	callq  40131b &lt;string_length&gt;</div><div class="line">  401347:	41 89 c4             	mov    %eax,%r12d</div><div class="line">  40134a:	48 89 ef             	mov    %rbp,%rdi</div><div class="line">  40134d:	e8 c9 ff ff ff       	callq  40131b &lt;string_length&gt;</div><div class="line">  401352:	ba 01 00 00 00       	mov    $0x1,%edx</div><div class="line">  401357:	41 39 c4             	cmp    %eax,%r12d</div><div class="line">  40135a:	75 3f                	jne    40139b &lt;strings_not_equal+0x63&gt;</div><div class="line">  40135c:	0f b6 03             	movzbl (%rbx),%eax</div><div class="line">  40135f:	84 c0                	test   %al,%al</div><div class="line">  401361:	74 25                	je     401388 &lt;strings_not_equal+0x50&gt;</div><div class="line">  401363:	3a 45 00             	cmp    0x0(%rbp),%al</div><div class="line">  401366:	74 0a                	je     401372 &lt;strings_not_equal+0x3a&gt;</div><div class="line">  401368:	eb 25                	jmp    40138f &lt;strings_not_equal+0x57&gt;</div><div class="line">  40136a:	3a 45 00             	cmp    0x0(%rbp),%al</div><div class="line">  40136d:	0f 1f 00             	nopl   (%rax)</div><div class="line">  401370:	75 24                	jne    401396 &lt;strings_not_equal+0x5e&gt;</div><div class="line">  401372:	48 83 c3 01          	add    $0x1,%rbx</div><div class="line">  401376:	48 83 c5 01          	add    $0x1,%rbp</div><div class="line">  40137a:	0f b6 03             	movzbl (%rbx),%eax</div><div class="line">  40137d:	84 c0                	test   %al,%al</div><div class="line">  40137f:	75 e9                	jne    40136a &lt;strings_not_equal+0x32&gt;</div><div class="line">  401381:	ba 00 00 00 00       	mov    $0x0,%edx</div><div class="line">  401386:	eb 13                	jmp    40139b &lt;strings_not_equal+0x63&gt;</div><div class="line">  401388:	ba 00 00 00 00       	mov    $0x0,%edx</div><div class="line">  40138d:	eb 0c                	jmp    40139b &lt;strings_not_equal+0x63&gt;</div><div class="line">  40138f:	ba 01 00 00 00       	mov    $0x1,%edx</div><div class="line">  401394:	eb 05                	jmp    40139b &lt;strings_not_equal+0x63&gt;</div><div class="line">  401396:	ba 01 00 00 00       	mov    $0x1,%edx</div><div class="line">  40139b:	89 d0                	mov    %edx,%eax</div><div class="line">  40139d:	5b                   	pop    %rbx</div><div class="line">  40139e:	5d                   	pop    %rbp</div><div class="line">  40139f:	41 5c                	pop    %r12</div><div class="line">  4013a1:	c3                   	retq</div></pre></td></tr></table></figure>
<p>401342和40134d都调用了<code>string\_length()</code>并在401357处判断两者的返回值,通过观察可得出string_length的原型为<strong>int string_length(char *)</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">000000000040131b &lt;string_length&gt;:</div><div class="line">  40131b:	80 3f 00             	cmpb   $0x0,(%rdi)</div><div class="line">  40131e:	74 12                	je     401332 &lt;string_length+0x17&gt;</div><div class="line">  401320:	48 89 fa             	mov    %rdi,%rdx</div><div class="line">  401323:	48 83 c2 01          	add    $0x1,%rdx</div><div class="line">  401327:	89 d0                	mov    %edx,%eax</div><div class="line">  401329:	29 f8                	sub    %edi,%eax</div><div class="line">  40132b:	80 3a 00             	cmpb   $0x0,(%rdx)</div><div class="line">  40132e:	75 f3                	jne    401323 &lt;string_length+0x8&gt;</div><div class="line">  401330:	f3 c3                	repz retq </div><div class="line">  401332:	b8 00 00 00 00       	mov    $0x0,%eax</div><div class="line">  401337:	c3                   	retq</div></pre></td></tr></table></figure>
<p>40131b:  cmpb $0x0, (%rdi) 判断参数字符串是否为空.<br>401320~40132e遍历字符串，计算长度。<br>40132e:  判断是否到了字符串结束标志符’\0’.<br>通过以上可得知，<code>string_length()</code>计算字符串长度</p>
<p>回到<code>string_not_equal()</code>上：</p>
<p>401357:      cmp    %eax,%r12d 比较两个字符串长度<br>40135a:      jne    40139b <strings_not_equal+0x63>， 如果长度不相等，<code>string_not_equal()</code>返回1<br>40135c~401381遍历并分别比较两个字符串对应位置的字符是否相同，相同返回0，不同返回1.</strings_not_equal+0x63></p>
<p><strong>回到phase_1()上</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">400eee:	85 c0                	test   %eax,%eax</div><div class="line">400ef0:	74 05                	je     400ef7 &lt;phase_1+0x17&gt;</div><div class="line"> 400ef2:	e8 43 05 00 00       	callq  40143a &lt;explode_bomb&gt;</div><div class="line"> 400ef7:	48 83 c4 08          	add    $0x8,%rsp</div></pre></td></tr></table></figure>
<p>显而易见，答案在第二个参数上。<code>x/s 0x402400</code></p>
<h3><span id="phase_2">phase_2:</span></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">000000000040145c &lt;read_six_numbers&gt;:</div><div class="line">  40145c:	48 83 ec 18          	sub    $0x18,%rsp</div><div class="line">  401460:	48 89 f2             	mov    %rsi,%rdx</div><div class="line">  401463:	48 8d 4e 04          	lea    0x4(%rsi),%rcx</div><div class="line">  401467:	48 8d 46 14          	lea    0x14(%rsi),%rax</div><div class="line">  40146b:	48 89 44 24 08       	mov    %rax,0x8(%rsp)</div><div class="line">  401470:	48 8d 46 10          	lea    0x10(%rsi),%rax</div><div class="line">  401474:	48 89 04 24          	mov    %rax,(%rsp)</div><div class="line">  401478:	4c 8d 4e 0c          	lea    0xc(%rsi),%r9</div><div class="line">  40147c:	4c 8d 46 08          	lea    0x8(%rsi),%r8</div><div class="line">  401480:	be c3 25 40 00       	mov    $0x4025c3,%esi</div><div class="line">  401485:	b8 00 00 00 00       	mov    $0x0,%eax</div><div class="line">  40148a:	e8 61 f7 ff ff       	callq  400bf0 &lt;__isoc99_sscanf@plt&gt;</div><div class="line">  40148f:	83 f8 05             	cmp    $0x5,%eax</div><div class="line">  401492:	7f 05                	jg     401499 &lt;read_six_numbers+0x3d&gt;</div><div class="line">  401494:	e8 a1 ff ff ff       	callq  40143a &lt;explode_bomb&gt;</div><div class="line">  401499:	48 83 c4 18          	add    $0x18,%rsp</div><div class="line">  40149d:	c3                   	retq</div></pre></td></tr></table></figure>
<p>通过gdb调试，执行<code>x/s 0x4025c3</code> 得到<code>&quot;%d %d %d %d %d %d&quot;</code>,可知道<br><code>read_six_number()</code>通过调用<code>sscanf()</code>把输入的六个数字存储在<code>phase_2</code>的栈帧上。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">0000000000400efc &lt;phase_2&gt;:</div><div class="line">  400efc:	55                   	push   %rbp</div><div class="line">  400efd:	53                   	push   %rbx</div><div class="line">  400efe:	48 83 ec 28          	sub    $0x28,%rsp</div><div class="line">  400f02:	48 89 e6             	mov    %rsp,%rsi</div><div class="line">  400f05:	e8 52 05 00 00       	callq  40145c &lt;read_six_numbers&gt;</div><div class="line">  400f0a:	83 3c 24 01          	cmpl   $0x1,(%rsp)</div><div class="line">  400f0e:	74 20                	je     400f30 &lt;phase_2+0x34&gt;</div><div class="line">  400f10:	e8 25 05 00 00       	callq  40143a &lt;explode_bomb&gt;</div><div class="line">  400f15:	eb 19                	jmp    400f30 &lt;phase_2+0x34&gt;</div><div class="line">  400f17:	8b 43 fc             	mov    -0x4(%rbx),%eax</div><div class="line">  400f1a:	01 c0                	add    %eax,%eax</div><div class="line">  400f1c:	39 03                	cmp    %eax,(%rbx)</div><div class="line">  400f1e:	74 05                	je     400f25 &lt;phase_2+0x29&gt;</div><div class="line">  400f20:	e8 15 05 00 00       	callq  40143a &lt;explode_bomb&gt;</div><div class="line">  400f25:	48 83 c3 04          	add    $0x4,%rbx</div><div class="line">  400f29:	48 39 eb             	cmp    %rbp,%rbx</div><div class="line">  400f2c:	75 e9                	jne    400f17 &lt;phase_2+0x1b&gt;</div><div class="line">  400f2e:	eb 0c                	jmp    400f3c &lt;phase_2+0x40&gt;</div><div class="line">  400f30:	48 8d 5c 24 04       	lea    0x4(%rsp),%rbx</div><div class="line">  400f35:	48 8d 6c 24 18       	lea    0x18(%rsp),%rbp</div><div class="line">  400f3a:	eb db                	jmp    400f17 &lt;phase_2+0x1b&gt;</div><div class="line">  400f3c:	48 83 c4 28          	add    $0x28,%rsp</div><div class="line">  400f40:	5b                   	pop    %rbx</div><div class="line">  400f41:	5d                   	pop    %rbp</div><div class="line">  400f42:	c3                   	retq</div></pre></td></tr></table></figure>
<p>400f0a: Compare a[0] : 0x1<br>400f15~400f3a: Compare a[i] : 2a[i-1] &nbsp; 0 &lt; i &lt;= 6<br>400f1c: cmp %eax, (%rbx) &nbsp;<em>Compare 2a[i-1] : a[i]</em></p>
<h3><span id="phase_4">phase_4:</span></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">000000000040100c &lt;phase_4&gt;:</div><div class="line">  40100c:	48 83 ec 18          	sub    $0x18,%rsp</div><div class="line">  401010:	48 8d 4c 24 0c       	lea    0xc(%rsp),%rcx	; store (unsigned) &amp;x2</div><div class="line">  401015:	48 8d 54 24 08       	lea    0x8(%rsp),%rdx	; store &amp;x1</div><div class="line">  40101a:	be cf 25 40 00       	mov    $0x4025cf,%esi</div><div class="line">  40101f:	b8 00 00 00 00       	mov    $0x0,%eax</div><div class="line">  401024:	e8 c7 fb ff ff       	callq  400bf0 &lt;__isoc99_sscanf@plt&gt;</div><div class="line">  401029:	83 f8 02             	cmp    $0x2,%eax	; Compare re : 2</div><div class="line">  40102c:	75 07                	jne    401035 &lt;phase_4+0x29&gt;	; If != goto error_fun</div><div class="line">  40102e:	83 7c 24 08 0e       	cmpl   $0xe,0x8(%rsp)	; Compare *x2 : 0</div><div class="line">  401033:	76 05                	jbe    40103a &lt;phase_4+0x2e&gt;	; If == goto x1_be_e</div><div class="line">  ; .L1:						error_fun</div><div class="line">  401035:	e8 00 04 00 00       	callq  40143a &lt;explode_bomb&gt;</div><div class="line">  ; .L2:						x1_be_e</div><div class="line">  40103a:	ba 0e 00 00 00       	mov    $0xe,%edx	; Create a = 0xe</div><div class="line">  40103f:	be 00 00 00 00       	mov    $0x0,%esi	; Create b = 0x0</div><div class="line">  401044:	8b 7c 24 08          	mov    0x8(%rsp),%edi	Create arg1 = *x1</div><div class="line">  401048:	e8 81 ff ff ff       	callq  400fce &lt;func4&gt;</div><div class="line">  40104d:	85 c0                	test   %eax,%eax	; Compare re : 0</div><div class="line">  40104f:	75 07                	jne    401058 &lt;phase_4+0x4c&gt;	; If != goto error_fun2</div><div class="line">  401051:	83 7c 24 0c 00       	cmpl   $0x0,0xc(%rsp)</div><div class="line">  401056:	74 05                	je     40105d &lt;phase_4+0x51&gt;</div><div class="line">  ; .L3:</div><div class="line">  401058:	e8 dd 03 00 00       	callq  40143a &lt;explode_bomb&gt;</div><div class="line">  ; .L4:						done</div><div class="line">  40105d:	48 83 c4 18          	add    $0x18,%rsp</div><div class="line">  401061:	c3                   	retq</div></pre></td></tr></table></figure>
<p>可从401051~401056得出 <em>x2 == 0<br>401010~40102e: &nbsp; 定义两个变量并初始化。<br>40103a~401048 初始化参数、调用func4()<br>func4(arg1, b, a)    arg1 = </em>x1</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">0000000000400fce &lt;func4&gt;:</div><div class="line">  400fce:	48 83 ec 08          	sub    $0x8,%rsp</div><div class="line">  400fd2:	89 d0                	mov    %edx,%eax</div><div class="line">  400fd4:	29 f0                	sub    %esi,%eax	;compute signed int t = a - b</div><div class="line">  400fd6:	89 c1                	mov    %eax,%ecx	;create unsigned t2 = t</div><div class="line">  400fd8:	c1 e9 1f             	shr    $0x1f,%ecx	;t2 &gt;&gt;= 31	Logical right shift</div><div class="line">  400fdb:	01 c8                	add    %ecx,%eax	; t += t2</div><div class="line">  400fdd:	d1 f8                	sar    %eax	; t &gt;&gt;= 1    Arithmetic right shift</div><div class="line">  400fdf:	8d 0c 30             	lea    (%rax,%rsi,1),%ecx	; create int n = t + b </div><div class="line">  400fe2:	39 f9                	cmp    %edi,%ecx	; Compare n : arg1</div><div class="line">  400fe4:	7e 0c                	jle    400ff2 &lt;func4+0x24&gt;	; If &lt;= goto	n_le_0</div><div class="line">  400fe6:	8d 51 ff             	lea    -0x1(%rcx),%edx	; a = n - 1</div><div class="line">  400fe9:	e8 e0 ff ff ff       	callq  400fce &lt;func4&gt;</div><div class="line">  400fee:	01 c0                	add    %eax,%eax	; t += t</div><div class="line">  400ff0:	eb 15                	jmp    401007 &lt;func4+0x39&gt;	; goto .L3</div><div class="line">  ; .L1								n_le_0</div><div class="line">  400ff2:	b8 00 00 00 00       	mov    $0x0,%eax</div><div class="line">  400ff7:	39 f9                	cmp    %edi,%ecx		; Compare n : arg1</div><div class="line">  400ff9:	7d 0c                	jge    401007 &lt;func4+0x39&gt;	; If &gt;= goto end</div><div class="line">  400ffb:	8d 71 01             	lea    0x1(%rcx),%esi	; b = n + 1</div><div class="line">  400ffe:	e8 cb ff ff ff       	callq  400fce &lt;func4&gt;</div><div class="line">  401003:	8d 44 00 01          	lea    0x1(%rax,%rax,1),%eax</div><div class="line">  ; .L3								end</div><div class="line">  401007:	48 83 c4 08          	add    $0x8,%rsp</div><div class="line">  40100b:	c3                   	retq</div></pre></td></tr></table></figure>
<p>func4的函数大概长这样子。。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">int func4(unsigned arg1,   b,		a) &#123;	</div><div class="line">	int t = a - b;</div><div class="line">	unsigned t2 = (unsigned)t &gt;&gt; 31;</div><div class="line">	t += t2;</div><div class="line">	t &gt;&gt;= 1;</div><div class="line">	int n = t + b;</div><div class="line">	int res;</div><div class="line">	if (n &lt;= arg1) &#123;</div><div class="line">		if (n &gt;= arg1)	// n == arg1	递归终止条件</div><div class="line">			return 0;</div><div class="line">		b = n + 1;</div><div class="line">		res = func4(arg1, b, a);</div><div class="line">		re = 2 * re + 1;</div><div class="line">		return re;</div><div class="line">	&#125;</div><div class="line">	a = n - 1;</div><div class="line">	res = func4(arg1, b, a)</div><div class="line">		res += res;</div><div class="line">		return res;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>根据40104d~40104f的判断，func4的返回值必须为0. 此种情况下，func4()的参数<font color="red">arg1 == n</font>才满足条件, b = 0x0, a = 0xe，可以计算出arg1（*x1）的值</p>
<h3><span id="phase_5">phase_5:</span></h3><p>phase_5(char *x)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line">0000000000401062 &lt;phase_5&gt;:</div><div class="line">  401062:	53                   	push   %rbx</div><div class="line">  401063:	48 83 ec 20          	sub    $0x20,%rsp</div><div class="line">  401067:	48 89 fb             	mov    %rdi,%rbx	; Store &amp;x1 = x</div><div class="line">  40106a:	64 48 8b 04 25 28 00 	mov    %fs:0x28,%rax	; Set canary</div><div class="line">  401071:	00 00 </div><div class="line">  401073:	48 89 44 24 18       	mov    %rax,0x18(%rsp)	; Store canary</div><div class="line">  401078:	31 c0                	xor    %eax,%eax	; Set %rax register all bits to zero</div><div class="line">  40107a:	e8 9c 02 00 00       	callq  40131b 	&lt;string_length&gt;	; Call string_length</div><div class="line">  40107f:	83 f8 06             	cmp    $0x6,%eax	; Compare re : 0x6</div><div class="line">  401082:	74 4e                	je     4010d2 &lt;phase_5+0x70&gt;	if == , goto slr_e_6</div><div class="line">  401084:	e8 b1 03 00 00       	callq  40143a &lt;explode_bomb&gt;</div><div class="line">  401089:	eb 47                	jmp    4010d2 &lt;phase_5+0x70&gt;</div><div class="line">  ; .L2:						loop:</div><div class="line">  40108b:	0f b6 0c 03          	movzbl (%rbx,%rax,1),%ecx	; Create a = *(x+i)</div><div class="line">  40108f:	88 0c 24             	mov    %cl,(%rsp)</div><div class="line">  401092:	48 8b 14 24          	mov    (%rsp),%rdx</div><div class="line">  401096:	83 e2 0f             	and    $0xf,%edx	; Create b = a &amp; 0xf, Clear high-order bits to zero</div><div class="line">  401099:	0f b6 92 b0 24 40 00 	movzbl 0x4024b0(%rdx),%edx	; Create char c = arg1[b]</div><div class="line">  4010a0:	88 54 04 10          	mov    %dl,0x10(%rsp,%rax,1)	; Store car[i] = c</div><div class="line">  4010a4:	48 83 c0 01          	add    $0x1,%rax	; i++</div><div class="line">  4010a8:	48 83 f8 06          	cmp    $0x6,%rax	; Compare i : 6</div><div class="line">  4010ac:	75 dd                	jne    40108b &lt;phase_5+0x29&gt;	; If != goto loop</div><div class="line">  4010ae:	c6 44 24 16 00       	movb   $0x0,0x16(%rsp)</div><div class="line">  4010b3:	be 5e 24 40 00       	mov    $0x40245e,%esi	; Set &amp;arg1</div><div class="line">  4010b8:	48 8d 7c 24 10       	lea    0x10(%rsp),%rdi	; Set &amp;arg2</div><div class="line">  4010bd:	e8 76 02 00 00       	callq  401338 &lt;strings_not_equal&gt;		; Call string_not_equal()</div><div class="line">  4010c2:	85 c0                	test   %eax,%eax	; Compare re : 0</div><div class="line">  4010c4:	74 13                	je     4010d9 &lt;phase_5+0x77&gt;	; If == goto done</div><div class="line">  4010c6:	e8 6f 03 00 00       	callq  40143a &lt;explode_bomb&gt;</div><div class="line">  4010cb:	0f 1f 44 00 00       	nopl   0x0(%rax,%rax,1)</div><div class="line">  4010d0:	eb 07                	jmp    4010d9 &lt;phase_5+0x77&gt;	; goto done</div><div class="line">  ; .L1:</div><div class="line">  4010d2:	b8 00 00 00 00       	mov    $0x0,%eax	; Create i = 0</div><div class="line">  4010d7:	eb b2                	jmp    40108b &lt;phase_5+0x29&gt;</div><div class="line">  ; .L3:							done</div><div class="line">  4010d9:	48 8b 44 24 18       	mov    0x18(%rsp),%rax</div><div class="line">  4010de:	64 48 33 04 25 28 00 	xor    %fs:0x28,%rax</div><div class="line">  4010e5:	00 00 </div><div class="line">  4010e7:	74 05                	je     4010ee &lt;phase_5+0x8c&gt;</div><div class="line">  4010e9:	e8 42 fa ff ff       	callq  400b30 &lt;__stack_chk_fail@plt&gt;</div><div class="line">  4010ee:	48 83 c4 20          	add    $0x20,%rsp</div><div class="line">  4010f2:	5b                   	pop    %rbx</div><div class="line">  4010f3:	c3                   	retq</div></pre></td></tr></table></figure>
<p>执行 <code>x/s 0x40245e</code>，打印的值为 <code>flyers</code>, 执行’x/s’, 打印<code>0x4024b0 &lt;array.3449&gt;:    &quot;maduiersnfotvbylSo you think you can stop the bomb with ctrl-c, do you?&quot;</code> 为一个数组</p>
<p>loop循环逐个读取输入字符串中的字符，mod 16，作为array.3449的偏移量取出字符，再与<code>flyers</code>比较</p>
<h3><span id="phase_6">phase_6:</span></h3><blockquote>
<p>此题指令数有点多，可以拆开为几部分</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">4010f4:	41 56                	push   %r14</div><div class="line">  4010f6:	41 55                	push   %r13</div><div class="line">  4010f8:	41 54                	push   %r12</div><div class="line">  4010fa:	55                   	push   %rbp</div><div class="line">  4010fb:	53                   	push   %rbx</div><div class="line">  4010fc:	48 83 ec 50          	sub    $0x50,%rsp</div><div class="line">  401100:	49 89 e5             	mov    %rsp,%r13</div><div class="line">  401103:	48 89 e6             	mov    %rsp,%rsi</div><div class="line">  401106:	e8 51 03 00 00       	callq  40145c &lt;read_six_numbers&gt;</div><div class="line">  40110b:	49 89 e6             	mov    %rsp,%r14</div><div class="line">  40110e:	41 bc 00 00 00 00    	mov    $0x0,%r12d	; Create i = 0</div><div class="line">  ;.L4:				loop:</div><div class="line">  401114:	4c 89 ed             	mov    %r13,%rbp	;Get &amp;a[i]</div><div class="line">  401117:	41 8b 45 00          	mov    0x0(%r13),%eax	; Get a[i]</div><div class="line">  40111b:	83 e8 01             	sub    $0x1,%eax	; Create b = a[i-1]</div><div class="line">  40111e:	83 f8 05             	cmp    $0x5,%eax	;Compare b : 0x5</div><div class="line">  401121:	76 05                	jbe    401128 &lt;phase_6+0x34&gt;	; if &lt;= goto b_be_5</div><div class="line">  401123:	e8 12 03 00 00       	callq  40143a &lt;explode_bomb&gt;</div><div class="line">  ;.L1						b_be_5</div><div class="line">  401128:	41 83 c4 01          	add    $0x1,%r12d	; Compute i += 1</div><div class="line">  40112c:	41 83 fc 06          	cmp    $0x6,%r12d	; Compare i : 6</div><div class="line">  401130:	74 21                	je     401153 &lt;phase_6+0x5f&gt;	; if == goto done</div><div class="line">  401132:	44 89 e3             	mov    %r12d,%ebx	; Create j = i</div><div class="line">  ; .L13				embedderLoop</div><div class="line">  401135:	48 63 c3             	movslq %ebx,%rax	; Get a[j]</div><div class="line">  401138:	8b 04 84             	mov    (%rsp,%rax,4),%eax</div><div class="line">  40113b:	39 45 00             	cmp    %eax,0x0(%rbp)	; Compare a[i-1] : a[j]</div><div class="line">  40113e:	75 05                	jne    401145 &lt;phase_6+0x51&gt;	; if != goto notequal</div><div class="line">  401140:	e8 f5 02 00 00       	callq  40143a &lt;explode_bomb&gt;</div><div class="line">  ; .L3 				not equal</div><div class="line">  401145:	83 c3 01             	add    $0x1,%ebx	Compute j += 1</div><div class="line">  401148:	83 fb 05             	cmp    $0x5,%ebx	;Compare j : 5</div><div class="line">  40114b:	7e e8                	jle    401135 &lt;phase_6+0x41&gt;	; If &lt;= goto embeddedLoop</div><div class="line">  40114d:	49 83 c5 04          	add    $0x4,%r13	; Get a[i-1]</div><div class="line">  401151:	eb c1                	jmp    401114 &lt;phase_6+0x20&gt;	; goto loop</div><div class="line">  ;.L2					done</div><div class="line">  401153:	48 8d 74 24 18       	lea    0x18(%rsp),%rsi</div></pre></td></tr></table></figure>
<p>这段指令实现了类似如下的功能:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">for (int i = 0; i &lt; 6; i++) &#123;</div><div class="line">	if (a[i] &gt; 0x5)	explode_bomb();</div><div class="line">	for (int j = 1; j &lt;= 5; j++)</div><div class="line">		if (a[j] == a[i])</div><div class="line">			explode_bomb();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">;.L2				done</div><div class="line">401153:	48 8d 74 24 18       	lea    0x18(%rsp),%rsi	; Get bound = a + 6</div><div class="line">401158:	4c 89 f0             	mov    %r14,%rax</div><div class="line">40115b:	b9 07 00 00 00       	mov    $0x7,%ecx	; Create subtr = 7</div><div class="line">;.L5:</div><div class="line">401160:	89 ca                	mov    %ecx,%edx</div><div class="line">401162:	2b 10                	sub    (%rax),%edx	; Compute c = subtr - *a</div><div class="line">401164:	89 10                	mov    %edx,(%rax)	;Store *a = c</div><div class="line">401166:	48 83 c0 04          	add    $0x4,%rax	;Compute a += 1</div><div class="line">40116a:	48 39 f0             	cmp    %rsi,%rax	; Compare a : bound</div><div class="line">40116d:	75 f1                	jne    401160 &lt;phase_6+0x6c&gt;	;if != goto second_loop</div></pre></td></tr></table></figure>
<p>这段指令实现了类似如下的功能</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">int *bound = a + 6;</div><div class="line">while (bound != a)&#123;</div><div class="line">	c = 7 - *a;</div><div class="line">	*a = c;</div><div class="line">	a++;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">40116f:	be 00 00 00 00       	mov    $0x0,%esi</div><div class="line">  401174:	eb 21                	jmp    401197 &lt;phase_6+0xa3&gt;	; goto djump</div><div class="line">  ; .L7:					loop4</div><div class="line">  401176:	48 8b 52 08          	mov    0x8(%rdx),%rdx	; begin_node = begin_node-&gt;next</div><div class="line">  40117a:	83 c0 01             	add    $0x1,%eax</div><div class="line">  40117d:	39 c8                	cmp    %ecx,%eax	; Compare i : a[n]</div><div class="line">  40117f:	75 f5                	jne    401176 &lt;phase_6+0x82&gt;	; if != goto loop4</div><div class="line">  401181:	eb 05                	jmp    401188 &lt;phase_6+0x94&gt;	; goto set_node</div><div class="line">  ;.L9:					loop3</div><div class="line">  401183:	ba d0 32 60 00       	mov    $0x6032d0,%edx	; Get begin_node</div><div class="line">  ;.L8						set_node</div><div class="line">  401188:	48 89 54 74 20       	mov    %rdx,0x20(%rsp,%rsi,2)	;	Create *node = begin_node</div><div class="line">  40118d:	48 83 c6 04          	add    $0x4,%rsi	; Get new memory to store node</div><div class="line">  401191:	48 83 fe 18          	cmp    $0x18,%rsi</div><div class="line">  401195:	74 14                	je     4011ab &lt;phase_6+0xb7&gt;</div><div class="line">  ; .L6 					djump</div><div class="line">  401197:	8b 0c 34             	mov    (%rsp,%rsi,1),%ecx	; Get a[n]</div><div class="line">  40119a:	83 f9 01             	cmp    $0x1,%ecx	; Compare a[n] : 1</div><div class="line">  40119d:	7e e4                	jle    401183 &lt;phase_6+0x8f&gt;	; If &lt;= goto loop3</div><div class="line">  40119f:	b8 01 00 00 00       	mov    $0x1,%eax	; Create i = 1</div><div class="line">  4011a4:	ba d0 32 60 00       	mov    $0x6032d0,%edx	; Get begin_node</div><div class="line">  4011a9:	eb cb                	jmp    401176 &lt;phase_6+0x82&gt;	; goto loop4</div><div class="line">  4011ab:	48 8b 5c 24 20       	mov    0x20(%rsp),%rbx</div><div class="line">  4011b0:	48 8d 44 24 28       	lea    0x28(%rsp),%rax</div><div class="line">  4011b5:	48 8d 74 24 50       	lea    0x50(%rsp),%rsi</div><div class="line">  4011ba:	48 89 d9             	mov    %rbx,%rcx</div><div class="line">  4011bd:	48 8b 10             	mov    (%rax),%rdx</div><div class="line">  4011c0:	48 89 51 08          	mov    %rdx,0x8(%rcx)</div><div class="line">  4011c4:	48 83 c0 08          	add    $0x8,%rax</div><div class="line">  4011c8:	48 39 f0             	cmp    %rsi,%rax</div><div class="line">  4011cb:	74 05                	je     4011d2 &lt;phase_6+0xde&gt;</div><div class="line">  4011cd:	48 89 d1             	mov    %rdx,%rcx</div><div class="line">  4011d0:	eb eb                	jmp    4011bd &lt;phase_6+0xc9&gt;</div><div class="line">  ; .L11:				endsetnode</div><div class="line">  4011d2:	48 c7 42 08 00 00 00 	movq   $0x0,0x8(%rdx)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">/*</div><div class="line">	struct Node *saveNode[6]		0x20(%rsp) ~ 0x48(%rsp)</div><div class="line">	0x6032d0为一个链表头节点所在的内存位置</div><div class="line">	这段指令按照a[n]的大小从链表节点取出某个节点</div><div class="line">	</div><div class="line">*/</div><div class="line">// </div><div class="line">for (int n = 0; n &lt; 6; n++) &#123;</div><div class="line">	struct Node *nod = begin;	// beign  -- 0x6032d0</div><div class="line">	if (a[n] &gt; 1) &#123;</div><div class="line">		counter = 1;</div><div class="line">		do &#123;</div><div class="line">			nod = nod-&gt;next;</div><div class="line">			counter++;</div><div class="line">		&#125; while (counter != a[n])</div><div class="line">			</div><div class="line">	&#125;</div><div class="line">	saveNode = nod;</div><div class="line">	saveNode++;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>基本到这里phase_6就可以计算出结果了</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/09/18/AddTwoNumbersII/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lzx1995">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/header.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/18/AddTwoNumbersII/" itemprop="url">Odd Even Linked List</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-18T20:59:01+08:00">
                2017-09-18
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3><span id="445-add-two-numbers-ii">445. Add Two Numbers II</span></h3><p>You are given two non-empty linked lists representing two non-negative integers. The most significant digit comes first and each of their nodes contain a single digit. Add the two numbers and return it as a linked list.</p>
<p>You may assume the two numbers do not contain any leading zero, except the number 0 itself.</p>
<h5><span id="follow-up">Follow up:</span></h5><p>What if you cannot modify the input lists? In other words, reversing the lists is not allowed.</p>
<h5><span id="example">Example:</span></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Input: (7 -&gt; 2 -&gt; 4 -&gt; 3) + (5 -&gt; 6 -&gt; 4)</div><div class="line">Output: 7 -&gt; 8 -&gt; 0 -&gt; 7</div></pre></td></tr></table></figure>
<p><a href="https://leetcode.com/problems/add-two-numbers-ii/description/" target="_blank" rel="external">leetCode</a></p>
<blockquote>
<p>解决方法： 运用递归得到最简单的子问题（位与位的加法），最后合并子问题</p>
</blockquote>
<ul>
<li>ps： 以下这个答案没有经过简化=。=</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line">public ListNode addTwoNumbers(ListNode l1, ListNode l2) &#123;</div><div class="line">        if (l1 == null) return l2;</div><div class="line">        else if (l2 == null)    return l1;</div><div class="line">        ListNode headl1 = l1, headl2 = l2;</div><div class="line">        int len1 = 0, len2 = 0;</div><div class="line">        while(true) &#123;</div><div class="line">            if (headl1 != null) &#123;</div><div class="line">                headl1 = headl1.next;</div><div class="line">                len1++;</div><div class="line">            &#125;</div><div class="line">            if (headl2 != null) &#123;</div><div class="line">                headl2 = headl2.next;</div><div class="line">                len2++;</div><div class="line">            &#125;</div><div class="line">            if (headl1 == null &amp;&amp; headl2 == null)   break;</div><div class="line">        &#125;</div><div class="line">        ListNode head = new ListNode(0);</div><div class="line">        if (len1 &gt;= len2) &#123;</div><div class="line">            head.val = helper(l1, l2, len1-len2);</div><div class="line">            </div><div class="line">        &#125; else &#123;</div><div class="line">            head.val = helper(l2, l1, len2 - len1);</div><div class="line">        &#125;</div><div class="line">        if (head.val &gt; 0 &amp;&amp; len1 &gt;= len2) &#123;</div><div class="line">            head.next = l1;</div><div class="line">            return head;</div><div class="line">        &#125; else if (head.val &gt; 0 &amp;&amp; len1 &lt; len2) &#123;</div><div class="line">            head.next = l2;</div><div class="line">            return head;</div><div class="line">        &#125;</div><div class="line">        return len1 &gt;= len2 ? l1 : l2;</div><div class="line">    &#125;</div><div class="line">    private int helper(ListNode l1, ListNode l2, int len) &#123;</div><div class="line">        if (len &gt; 0) &#123;</div><div class="line">            len--;</div><div class="line">            l1.val += helper(l1.next, l2, len);</div><div class="line">            if (l1.val &gt;= 10) &#123;</div><div class="line">                l1.val -= 10;</div><div class="line"></div><div class="line">                return 1;</div><div class="line">            &#125; else</div><div class="line">                return 0;</div><div class="line">        &#125; else if (l1 != null &amp;&amp; l2 != null) &#123;</div><div class="line">            l1.val = l1.val + l2.val + helper(l1.next, l2.next, 0);</div><div class="line"></div><div class="line"></div><div class="line">            if (l1.val &gt;= 10) &#123;</div><div class="line">                l1.val -= 10;</div><div class="line">                return 1;</div><div class="line">            &#125; else</div><div class="line">                return 0;</div><div class="line">        &#125; else &#123;</div><div class="line">            return 0;</div><div class="line">        &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<blockquote>
<p><a href="https://discuss.leetcode.com/topic/65279/easy-o-n-java-solution-using-stack" target="_blank" rel="external">网上的解决办法</a> 通过运用栈来实现，不过时间复杂度和空间复杂度都为O(n)</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">public ListNode addTwoNumbers(ListNode l1, ListNode l2) &#123;</div><div class="line">        Stack&lt;Integer&gt; s1 = new Stack&lt;Integer&gt;();</div><div class="line">        Stack&lt;Integer&gt; s2 = new Stack&lt;Integer&gt;();</div><div class="line">        </div><div class="line">        while(l1 != null) &#123;</div><div class="line">            s1.push(l1.val);</div><div class="line">            l1 = l1.next;</div><div class="line">        &#125;;</div><div class="line">        while(l2 != null) &#123;</div><div class="line">            s2.push(l2.val);</div><div class="line">            l2 = l2.next;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        int sum = 0;</div><div class="line">        ListNode list = new ListNode(0);</div><div class="line">        while (!s1.empty() || !s2.empty()) &#123;</div><div class="line">            if (!s1.empty()) sum += s1.pop();</div><div class="line">            if (!s2.empty()) sum += s2.pop();</div><div class="line">            list.val = sum % 10;</div><div class="line">            ListNode head = new ListNode(sum / 10);</div><div class="line">            head.next = list;</div><div class="line">            list = head;</div><div class="line">            sum /= 10;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        return list.val == 0 ? list.next : list;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/09/13/328. Odd Even Linked List/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lzx1995">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/header.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/13/328. Odd Even Linked List/" itemprop="url">Odd Even Linked List</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-13T22:08:13+08:00">
                2017-09-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2><span id="328-odd-even-linked-list">328. Odd Even Linked List</span></h2><p>Given a singly linked list, group all odd nodes together followed by the even nodes. Please note here we are talking about the node number and not the value in the nodes.</p>
<p>You should try to do it in place. The program should run in O(1) space complexity and O(nodes) time complexity.</p>
<h5><span id="example">Example:</span></h5><p>Given 1-&gt;2-&gt;3-&gt;4-&gt;5-&gt;NULL,<br>return 1-&gt;3-&gt;5-&gt;2-&gt;4-&gt;NULL.</p>
<h5><span id="note">Note:</span></h5><p>The relative order inside both the even and odd groups should remain as it was in the input.<br>The first node is considered odd, the second node even and so on …</p>
<p><a href="https://leetcode.com/problems/odd-even-linked-list/description/" target="_blank" rel="external">题目来源</a></p>
<blockquote>
<p>思路： 记录即将被调换的奇数的前一个偶数节点、调换后的奇数链表的最后一个节点。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * Definition for singly-linked list.</span></div><div class="line"><span class="comment"> * public class ListNode &#123;</span></div><div class="line"><span class="comment"> *     int val;</span></div><div class="line"><span class="comment"> *     ListNode next;</span></div><div class="line"><span class="comment"> *     ListNode(int x) &#123; val = x; &#125;</span></div><div class="line"><span class="comment"> * &#125;</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">oddEvenList</span><span class="params">(ListNode head)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (head == <span class="keyword">null</span> || head.next == <span class="keyword">null</span> || head.next.next == <span class="keyword">null</span>)    <span class="keyword">return</span> head;</div><div class="line">        ListNode cur = head;</div><div class="line">        <span class="comment">// 奇数</span></div><div class="line">        ListNode odd = head.next.next;</div><div class="line">        <span class="comment">// 偶数</span></div><div class="line">        ListNode even = head.next;</div><div class="line">        <span class="keyword">while</span> (odd != <span class="keyword">null</span>) &#123;</div><div class="line">            even.next = odd.next;</div><div class="line">            even = even.next;</div><div class="line">            odd.next = cur.next;</div><div class="line">            cur.next = odd;</div><div class="line">            cur = cur.next;</div><div class="line">            <span class="keyword">if</span> (even == <span class="keyword">null</span> || even.next == <span class="keyword">null</span>)  <span class="keyword">return</span> head;</div><div class="line">            odd = even.next;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> head;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          
            <img class="site-author-image" itemprop="image"
              src="/images/header.png"
              alt="lzx1995" />
          
            <p class="site-author-name" itemprop="name">lzx1995</p>
            <p class="site-description motion-element" itemprop="description"></p>
        </div>

        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
            
              <a href="/archives">
            
                <span class="site-state-item-count">5</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          

          
            
            
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">标签</span>
              
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/lzx1995" target="_blank" title="GitHub">
                  GitHub</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="mailto:unforkli@163.com" target="_blank" title="E-Mail">
                  E-Mail</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://stackoverflow.com/users/7743169/haha-li" target="_blank" title="StackOverflow">
                  StackOverflow</a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">lzx1995</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动</div>

  <span class="post-meta-divider">|</span>

  <div class="theme-info">主题 &mdash; <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.2</div>


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  

  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>


  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  








  





  

  

  

  

  

  

</body>
</html>
